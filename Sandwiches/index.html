<!DOCTYPE html>
<html>
<head>
	<title>Signature Line Sandwiches</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<link rel="shortcut icon" type="image/png" href="logo.png" />
	<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
	<script src="Cookie.js"></script>
	<script type="text/javascript">
	"use strict";
	/*global Cookies
	  global $*/
	  class Item{
	  	constructor(name, price, request){
	  		this.n = name;
	  		this.p = price;
	  		this.r = request;
	  	}
	  }
		var items = [];
		var dcs = [];
		var x = 0;
		window.onload=function(){
			var c = Cookies.get("cart");
			var tot = Cookies.get("t");
			if(typeof c != "undefined" && JSON.parse(c).length > 0){
				c = JSON.parse(c);
				$("#vc").text("View Cart ("+c.length+")");
				$("#total").text("Total: $"+parseFloat(tot).toFixed(2));
			var table = document.getElementById("items");
			for(x = x; x < c.length; x++){
					var row = table.insertRow();
					row.insertCell(0).innerHTML = c[x].n;
					row.insertCell(1).innerHTML = "$" + c[x].p.toFixed(2);
					var r = c[x].r;
					if(typeof r == "undefined")
						row.insertCell(2).innerHTML = "<input type='text' class='sreq' id='r"+x+"' style='width: 100%; height: 100%;box-sizing: border-box; -webkit-box-sizing:border-box;' onkeyup='update(this.id)'>"
					else
						row.insertCell(2).innerHTML = "<input type='text' class='sreq' id='r"+x+"' style='width: 100%; height: 100%;box-sizing: border-box; -webkit-box-sizing:border-box;' onkeyup='update(this.id)' value='"+r+"'>"
					var c3 = row.insertCell(3);
					c3.innerHTML = "<img src='x.png' class='cartx' onclick='del("+row.rowIndex+")'>";
					c3.className = "delcell";
			}
			}
			addItem("Fairfax Cubano", "sandwich", "6.50", "Sliced Honey Ham; Sliced Smoked Turkey; Swiss Cheese; Stone Ground Mustard; Sliced Pickle; Torta Roll", "sandwich.png");
			addItem("Chicken Po-Boy", "sandwich", "6.50", "Seasoned Chicken Breast; Sliced Cheddar Cheese; Red Leaf Lettuce; Tomato; Sliced Red Onion; Creamy Chipotle Mayo; French Roll", "sandwich.png");
			addItem("Smoked Turkey Apple Cheddar", "sandwich", "6.50", "Sliced Smoked Turkey; Red Leaf Lettuce; Sliced Cheddar Cheese; Apple Cabbage Slaw; Focaccia Roll", "sandwich.png");
			addItem("Ciabatta Caprese", "sandwich", "6.50", "Mozzarella Cheese; Tomato, Spinach, & Basil; Creamy Italian Dressing; Ciabatta Roll", "sandwich.png");
			addItem("California Turkey Wrap", "sandwich", "6.50", "Smoked Turkey; Chopped Romaine; Diced Tomatoes; Diced Red Onions; Diced Avocado; Creamy Chipotle Dressing; Spinach Wrap", "sandwich.png");
			addItem("Southwestern Chicken Salad", "salad", "6.50", "Seasoned Chicken Breast; Kale & Romaine Mix; Roasted Corn and Black Beans; Grape Tomato; Shredded Cheddar Cheese; Tortilla Strips; Creamy Chipotle Dressing", "salad.png");
			addItem("Caesar Chicken Salad", "salad", "6.50", "Seasoned Chicken Breast; Kale & Romaine Mix; Parmesan Cheese; Parmesan Crisps; Caesar Dressing", "salad.png");
			addItem("Fall Harvest Salad", "salad", "6.50", "Seasoned Chicken Breast; Kale & Romaine Mix; Grape Tomato Halves; Sliced Red Onions; Apple Chips; Bleu Cheese Crumbles; Poppy Seed Vinaigrette Dressing", "salad.png");
			addItem("Summer Berry Salad", "salad", "6.50", "Seasoned Chicken Breast; Spinach; Red Grape; Sliced Strawberries; Blueberries; Mandarin Oranges; Glazed Walnuts; Poppy Seed Vinaigrette Dressing", "salad.png");
			addItem("Classic Caf\xE9 Grilled Chicken Salad", "salad", "6.50", "Seasoned Chicken Breast; Kale & Romaine Mix; Grape Tomato Halves; Sliced Cucumber; Sliced Red Onions; Grated Carrots; Ranch Dressing", "salad.png");
			
			
		}
		function update(id){
			console.log(id);
			var c = JSON.parse(Cookies.get("cart"));
			var i = parseInt(id.substring(1,2));
			console.log(i);
			c[i].r = document.getElementById(id).value;
			var cc = JSON.stringify(c);
			Cookies.set("cart", cc);
		}
		function addItem(name, type, price, desc, imgurl){
			document.getElementById("bod").innerHTML += "<span style='text-align: center' class='holder "+type.substring(0,3)+"'>"+
			"<div class=\"item "+type+"\" onclick='showInfo(\""+name+"\", "+price+", \""+desc+"\")'><h1 class='in'>"+name+"</h1></div></span><br>"
			items.push(name);
			dcs.push(desc);
		}
		// function showInfo(id){
		// 	$("#"+id).css("display", "none");
		// 	$("#"+id+"i").css("display", "block");
		// 	$("#"+id+"i").mouseleave(function(){
		// 		$("#"+id).css("display", "block");
		// 		$("#"+id+"i").css("display", "none");
		// 	});
		// }
		function sw(){
			$(".ik").css("display", "none");
			$(".sandwich").css("display", "inline-block");
			$(".san").css("display", "block");
			$(".atcsw").css("display", "inline");
			$(".arrow").css("display", "inline-block");
		}
		function sl(){
			$(".ik").css("display", "none");
			$(".sal").css("display", "block");
			$(".san").css("display", "none");
			$(".salad").css("display", "inline-block");
			$(".arrow").css("display", "inline-block");
		}
		function makePHP(){
			window.alert("");
		}
		function regenTable(c){
			var table = document.getElementById("items");
			table.innerHTML = "<tr><th>Item</th><th>Price</th><th>Special Requests (Optional)</th></tr>";
			for(var z = 0; z < c.length; z++){
					var row = table.insertRow();
					row.insertCell(0).innerHTML = c[z].n;
					row.insertCell(1).innerHTML = "$" + c[z].p.toFixed(2);
					var r = c[z].r;
					if(typeof r == "undefined" || r == "")
						row.insertCell(2).innerHTML = "<input type='text' class='sreq' id='r"+z+"' style='width: 100%; height: 100%;box-sizing: border-box; -webkit-box-sizing:border-box;' onkeyup='update(this.id)'>"
					else
						row.insertCell(2).innerHTML = "<input type='text' class='sreq' id='r"+z+"' style='width: 100%; height: 100%;box-sizing: border-box; -webkit-box-sizing:border-box;' onkeyup='update(this.id)' value='"+r+"'>"
					var c3 = row.insertCell(3);
					c3.innerHTML = "<img src='x.png' class='cartx' onclick='del("+row.rowIndex+")'>";
					c3.className = "delcell";
			}
		}
		function home(){
			$("form").css("display", "none");
			$("#bod").css("display", "block");
			$(".salad").css("display", "none");
			$(".sandwich").css("display", "none");
			$(".holder").css("display", "none");
			$("#cart").css("display", "none");
			$("#items").css("display", "none");
			$("#ec").css("display", "none");
			$("#sr").css("display", "none");
			$(".arrow").css("display", "none");
			$("#vc").css("display", "block");
			$(".ik").css("display", "block");
			$("#total").css("display", "none");
		}
		function showInfo(name, price, desc){
			var retstring = "";
			var top = desc.split("; ");
			for(var x = 0; x < top.length; x++){
				retstring += top[x]+"<br>";
			}
			$("#info").html("<img src='x.png' id='closer' onclick='remd()'><h2>"+name+"</h2><br><p>"+retstring+"</p><br><input type='text' id='sreq' placeholder='Enter a special request...'><br><br><span class='quant'>Quantity: </span><input class='numsel' value='1' type='number' name='quantity' min='1' max='10' id='numsel'><br><br><button onclick=\"add('"+name+"', "+price+", document.getElementById('sreq').value, document.getElementById('numsel').value)\">Add to Cart</button><br><br>");
			$("#dark").css("display", "block");
			$("#info").css("display", "block");
		}
		function remd(){
			$("#dark").css("display", "none");
			$("#info").css("display", "none");
		}
		function vc(){
			$(".arrow").css("display", "none");
			$("#bod").css("display", "none");
			$("#total").css("display", "block");
			$("#vc").css("display", "none");
			$(".ik").css("display", "none");
			$(".holder").css("display", "none");
			$(".salad").css("display", "none");
			$(".sandwich").css("display", "none");
			$("#cart").css("display", "block");
			var c = Cookies.get("cart");
			if(typeof c == "undefined" || JSON.parse(c).length == 0){
				$("#cart").text("Your cart is empty.");
				$("#vc").text("View Cart");
			}
			else{
				$("#sr").css("display", "block");
				$("form").css("display", "block");
				$("#items").css("display", "table");
				c = JSON.parse(c);
				$("#cart").html("You have " + c.length + " items in your cart.");
				$("#cc").css("display", "block");
				$("#ec").css("display", "block");
				
			}

		}
		function ec(){
			Cookies.remove("cart");
			Cookies.remove("t");
			document.getElementById("items").innerHTML = "<tr><th>Item</th><th>Price</th><th>Special Requests (Optional)</th></tr>";
			$("#sr").text("");
			$("#sr").css("display", "none");
			$("#items").css("display", "none");
			$("#vc").text("View Cart");
			$("#cart").text("Your cart is empty.");
			$("form").css("display", "none");
			$("#total").text("");

		}
		function del(i){
			console.log(i);
			var c = Cookies.get("cart");
			var tot = Cookies.get("t");
			var table = document.getElementById("items");
			table.deleteRow(i);
			c = JSON.parse(c);
			var price = c[i - 1].p;
			tot = parseFloat(tot);
			tot -= parseFloat(price);
			console.log(c.length);
			if(c.length > 1){
				c.splice(i - 1, 1);
				console.log(c);
				$("#vc").text("View Cart ("+c.length+")");
				$("#cart").text("You have "+c.length+" items in your cart.");
				$("#total").text("Total: $" + tot.toFixed(2));
			}
			else{
				c = [];
				tot = 0;
				$("#total").css("display", "none");
				$("#items").css("display", "none");
				$("#cart").text("Your cart is empty. ");
				$("#vc").text("View Cart");
				$("#ec").css("display", "none");
			}
			regenTable(c);
			Cookies.set("cart", JSON.stringify(c));
			Cookies.set("t", tot.toFixed(2));
		}
		function add(sw, p, desc, i){
			remd();
			var c = Cookies.get("cart");
			var tot = Cookies.get("t");
			var table = document.getElementById("items");
			if(typeof tot == "undefined")
				tot = 0.0;
			else
				tot = parseFloat(tot);
			if(typeof c == "undefined"){
				c = [];
				//ps = [];
			}
			else{
				c = JSON.parse(c);
				//ps = JSON.parse(ps);
			}
			console.log(desc);
			for(var iter = 0; iter < i; iter++){
			var row = table.insertRow();
			row.insertCell(0).innerHTML = sw;
			row.insertCell(1).innerHTML = "$" + p.toFixed(2);
			row.insertCell(2).innerHTML = "<input type='text' class='sreq' id='r"+x+"' style='width: 100%; height: 100%;box-sizing: border-box; -webkit-box-sizing:border-box;' onkeyup='update(this.id)' value='"+desc+"'>";
			var c3 = row.insertCell(3);
			c3.innerHTML = "<img src='x.png' class='cartx' onclick='del("+row.rowIndex+")'>";
			c3.className = "delcell";
			x++;
			c.push(new Item(sw, p, desc));
			tot = tot + p;
			}
			tot = tot.toFixed(2);
			console.log(tot);
			Cookies.set("cart", JSON.stringify(c));
			//Cookies.set("prices", JSON.stringify(ps));
			Cookies.set("t", parseFloat(tot));
			$("#vc").text("View Cart ("+c.length+")");
			// var table = document.getElementById("items");
			// var row = table.insertRow();
			// row.insertCell(0).innerHTML = sw;
			// row.insertCell(1).innerHTML = "$" + p.toFixed(2);
			$("#total").text("Total: $" + tot);
			home();
		}
	</script>
	<style type="text/css">
	    @keyframes disappear{
	    	from{display: block;}
	    	to{display: none;}
	    }
	    #home{
	    	cursor: pointer;
	    }
	    input{
	    	font-family: Roboto, sans-serif;
	    }
		body{
			-webkit-touch-callout: none;
	        -webkit-user-select: none;
	        -khtml-user-select: none;
	        -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
			cursor: default;
			font-family: Roboto, sans-serif;
			font-size: 1.5vw;
			background-color: rgb(230, 230, 250);
			color: rgb(0, 182, 207);
		}
		.sreq{
			/*background-color: transparent;*/
			border: 0px solid;
			font-size: 1.5vw;
			height: 1.8vw;
		}
		.in{
			z-index: 1;
			position: relative;
			transform: translateY(50%);
		}
		#logo{
			width: 10%;
			height: 10%;
		}
		.contain, #cart, #ec, #total{
			text-align: center;
			margin: 0 auto;
		}
		.ik{
			width: 50vw;
			height: 20vh;
			margin: 0 auto;
			margin-top: 10px;
			border: 1px solid black;
			display: block;
			background-position: center;
			margin-bottom: 0px;
			color: black;
		}
		.ikt{
			position: relative;
			top: 25%;
		}
		#ec{
			display: none;
			cursor: pointer;
		}
		#sw{
			background-image: url(sandwich.jpg);
			background-size: cover;
		}
		.cartx{
			position: relative;
			width: 1.5vw;
			height: 1.5vw;
			cursor: pointer;
		}
		#sl{
			background-image: url(salad.jpg);
			background-size: cover;
		}
		.center{
			display: flex;
			justify-content: center;
		}
		#sr{
			display: none;
			width: 20%;
			height: 7%;
		}
		.atc{
			border: 1px solid black;
			background-color: rgb(235, 235, 255);
			display: none;
			margin: 0 auto;
			float: right;
		}
		h1{
			background-color: rgba(255,255,255,0.6);
			font-size: 2vw;
		}
		p{
			margin-bottom: 20px;
		}
		.san{
			z-index: -5;
			transform: translateY(-5%);
		}
		.sal{
			z-index: -3;
			transform: translateY(-50%);
		}
		#total{
			display: none;
		}
		.item{
			width: 33%;
			height: 30vh;
			margin: 0 auto;
			border: 1px solid black;
			display: none;
			background-position: center;
			margin-bottom: 0px;
			color: black;
			text-align: center;
			position: relative;
			z-index: 0;
			cursor: pointer;
		}
		#idin::-webkit-inner-spin-button, #idin::-webkit-outer-spin-button { 
  			-webkit-appearance: none; 
  			margin: 0; 
		}
		form{
			text-align: center;
			display: none;
		}
		.info{
			height: 50px;
			width: 5%;
			margin: 0 auto;
			display: none;
			margin-bottom: 0px;
			color: black;
		}
		#items{
			margin-left:auto; 
    		margin-right:auto;
			display: none;
			border-color: black;
		}
		th,td{
			border: 1px solid black;
		}
		.delcell{
			border: none;
		}
		td{
			text-align: center;
		}
		th,td{
			width: 30%;
			height: 10%;
		}
		.arrow{
			width: 100%;
			height: 50px;
		}
		.ib{
			position: absolute;
			left: 115%;
			top: 25%;
			z-index: 40;
			height: 100px;
			width: 100px;
			cursor: pointer;
		}
		#info{
			position: fixed;
			width: 50%;
			left: 50%;
			top: 50%;
			transform: translateX(-50%) translateY(-50%);
			z-index: 50;
			text-align: center;
			background-color: white;
			text-align: center;
			display: none;
		}
		h2{
			margin-bottom: 0;
		}
		#dark{
			display: none;
			width: 100%;
			height: 100%;
			z-index: 50;
			background-color: black;
			opacity: 0.7;
			-moz-opacity: 0.7;
			background-repeat:no-repeat;
			background-position:center;
			position: fixed;
			top: 0px;
			left: 0px;
			
		}
		.sandwich{
			background-image: url(sandwich.jpg);
			background-size: 115%;
		}
		#closer{
			position: absolute;
			left: 100%;
			transform: translateX(-50px);
			top: 0%;
			width: 50px;
			height: 50px;
			cursor: pointer;
		}
		.salad{
			background-image: url(salad.jpg);
			background-size: cover;
		}
		.price{
			text-align: right;
			display: inline-block;
			float: right;
		}
		#vc{
			cursor: pointer;
		}
		#cart{
			/*margin-top: 20px;*/
			display: none;
		}
		.th{
			display: inline-block;
			vertical-align: middle;
		}
	</style>
</head>
<body>
<div id="dark"></div>
<div class="contain"><span onclick="home()" style="cursor: pointer;">
<img src="logo.png" id="logo"><br><span id="home">Signature Line Sandwiches</span></span><br><br>
<span id="vc" onclick="vc()">View Cart</span><br><br>
<span id="bod">
<div class="ik" id="sw" onclick="sw()">
	<h1 class='ikt'>Sandwiches/Wraps</h1>
</div>
<div class="ik" id="sl" onclick="sl()">
	<h1 class='ikt'>Salads</h1>
</div>
<div id="info"></div>
<!-- <div class="info" onclick="showInfo('Reuben')"><img src="arrow.png" id="arrow"></div>
<div class="item sandwich" onclick="add('Reuben', 3.0)">
	<h1>Reuben</h1>
</div><br>
<div class="atc atcsw">$3.50<a href="">Add to Cart</a></div>
<div class="info"><img src="arrow.png" id="arrow"></div>
<div class="item sandwich" onclick="add('BLT', 3.5)">
	<h1>BLT</h1>
</div><br>

<div class="item salad" onclick="add('Caesar', 4.5)">
<h1>Caesar</h1>
</div>
<div class="item salad" onclick="add('House Salad', 4.0)">
<h1>House Salad</h1> -->
</span>
</div>
</div>
<div id="cart">
</div><br>
<!--<div id="cc"></div><br><br><br>-->
<table id="items">
		<tr>
			<th>Item</th>
			<th>Price</th>
			<th>Special Requests (Optional)</th>
		</tr>
	</table><br>

<!-- <textarea id="sr" placeholder="Special requests (optional)" rows="5" cols="40"></textarea><br> -->
<div id="total"></div><br>
<div id="ec" onclick="ec()">Empty Cart</div>

<form id='ck' action="javascript:void(0);" onsubmit="makePHP()">
	<input type="number" id="idin" placeholder="Enter ID..." required>
	<input type="submit" value="Check Out">
</div>
</body>
</html>